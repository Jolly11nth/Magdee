import{r as n,u as $,a as M,j as e}from"./index-DfvNDOOY.js";import{A as O,E as S,a as E}from"./AuthErrorMessage-BbsiU4lg.js";import{m as U}from"./f82a941c409d8064bd2a0c4bcb7ad4befc1175e2-Cbw4ZlR3.js";import"./createLucideIcon-L4nsjaS5.js";import"./alert-circle-CIqoi4hF.js";function H({onNavigate:d,onSignupSuccess:g}){const[m,F]=n.useState(""),[l,C]=n.useState(""),[a,v]=n.useState(""),[c,P]=n.useState(""),[y,z]=n.useState(""),[f,k]=n.useState(!1),[u,A]=n.useState(!1),[h,B]=n.useState(!1),[r,x]=n.useState(!1),[b,p]=n.useState(""),[o,j]=n.useState({}),{signup:T}=$(),{logError:w}=M(),W=async s=>{s.preventDefault(),p(""),j({});const t={};if(m.trim()||(t.fullName="Full name is required"),l.trim()?l.length<3?t.username="Username must be at least 3 characters":/^[a-zA-Z0-9_]+$/.test(l)||(t.username="Username can only contain letters, numbers, and underscores"):t.username="Username is required",a.trim()?/\S+@\S+\.\S+/.test(a)||(t.email="Please enter a valid email address"):t.email="Email is required",c?c.length<8&&(t.password="Password must be at least 8 characters"):t.password="Password is required",c!==y&&(t.confirmPassword="Passwords do not match"),h||(t.terms="You must agree to the Privacy Policy and Terms of Service"),Object.keys(t).length>0){j(t);return}x(!0);try{console.log("🚀 Starting signup process for:",{fullName:m,username:l,email:a});const i=await T(m,l,a,c);i.success?(console.log("✅ Signup successful:",i),g&&g(i.user),d("home")):(console.error("❌ Signup failed:",i.error),p(i.error||"Signup failed. Please try again."),await w(new Error(i.error||"Signup failed"),{context:"signup_form",userEmail:a,errorType:"signup_failure"}))}catch(i){console.error("💥 Signup error:",i);const I=i.message||"An unexpected error occurred during signup";p(I),await w(i,{context:"signup_form",userEmail:a,errorType:"signup_exception"})}finally{x(!1)}},D=()=>{d("privacy-policy")},R=()=>{d("terms-of-service")};return e.jsxs("div",{style:{width:"100%",height:"100%",backgroundColor:"#ffffff",display:"flex",flexDirection:"column",fontFamily:"Poppins, sans-serif"},children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid #F3F4F6"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("button",{onClick:()=>d("auth"),disabled:r,style:{backgroundColor:"transparent",border:"none",fontSize:"1.5rem",cursor:r?"not-allowed":"pointer",color:"#374151",opacity:r?.6:1},children:"←"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("img",{src:U,alt:"Magdee",style:{width:"32px",height:"32px"}}),e.jsx("h1",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#4A90E2",margin:0},children:"Magdee"})]}),e.jsx("div",{style:{width:"1.5rem"}})]})}),e.jsxs("div",{style:{flex:1,padding:"2rem 1.5rem",display:"flex",flexDirection:"column",justifyContent:"center",maxWidth:"400px",margin:"0 auto",width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem"},children:"Create Account"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"1rem"},children:"Join Magdee to start your audio journey"})]}),b&&e.jsx(O,{message:b,onDismiss:()=>p("")}),e.jsxs("form",{onSubmit:W,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Full Name"}),e.jsx("input",{type:"text",value:m,onChange:s=>F(s.target.value),disabled:r,style:{width:"100%",padding:"0.75rem",backgroundColor:r?"#F9FAFB":"#ffffff",border:`1px solid ${o.fullName?"#EF4444":"#E5E7EB"}`,borderRadius:"0.5rem",fontSize:"1rem",fontFamily:"Poppins, sans-serif",opacity:r?.6:1,cursor:r?"not-allowed":"text"},placeholder:"Enter your full name"}),o.fullName&&e.jsx("p",{style:{color:"#EF4444",fontSize:"0.75rem",marginTop:"0.25rem"},children:o.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Username"}),e.jsx("input",{type:"text",value:l,onChange:s=>C(s.target.value),disabled:r,style:{width:"100%",padding:"0.75rem",backgroundColor:r?"#F9FAFB":"#ffffff",border:`1px solid ${o.username?"#EF4444":"#E5E7EB"}`,borderRadius:"0.5rem",fontSize:"1rem",fontFamily:"Poppins, sans-serif",opacity:r?.6:1,cursor:r?"not-allowed":"text"},placeholder:"Choose a username"}),o.username&&e.jsx("p",{style:{color:"#EF4444",fontSize:"0.75rem",marginTop:"0.25rem"},children:o.username})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Email"}),e.jsx("input",{type:"email",value:a,onChange:s=>v(s.target.value),disabled:r,style:{width:"100%",padding:"0.75rem",backgroundColor:r?"#F9FAFB":"#ffffff",border:`1px solid ${o.email?"#EF4444":"#E5E7EB"}`,borderRadius:"0.5rem",fontSize:"1rem",fontFamily:"Poppins, sans-serif",opacity:r?.6:1,cursor:r?"not-allowed":"text"},placeholder:"Enter your email"}),o.email&&e.jsx("p",{style:{color:"#EF4444",fontSize:"0.75rem",marginTop:"0.25rem"},children:o.email})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:f?"text":"password",value:c,onChange:s=>P(s.target.value),disabled:r,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 0.75rem",backgroundColor:r?"#F9FAFB":"#ffffff",border:`1px solid ${o.password?"#EF4444":"#E5E7EB"}`,borderRadius:"0.5rem",fontSize:"1rem",fontFamily:"Poppins, sans-serif",opacity:r?.6:1,cursor:r?"not-allowed":"text"},placeholder:"Create a password"}),e.jsx("button",{type:"button",onClick:()=>k(!f),disabled:r,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",backgroundColor:"transparent",border:"none",cursor:r?"not-allowed":"pointer",color:"#6B7280",opacity:r?.6:1},children:f?e.jsx(S,{size:20}):e.jsx(E,{size:20})})]}),o.password&&e.jsx("p",{style:{color:"#EF4444",fontSize:"0.75rem",marginTop:"0.25rem"},children:o.password})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Confirm Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:u?"text":"password",value:y,onChange:s=>z(s.target.value),disabled:r,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 0.75rem",backgroundColor:r?"#F9FAFB":"#ffffff",border:`1px solid ${o.confirmPassword?"#EF4444":"#E5E7EB"}`,borderRadius:"0.5rem",fontSize:"1rem",fontFamily:"Poppins, sans-serif",opacity:r?.6:1,cursor:r?"not-allowed":"text"},placeholder:"Confirm your password"}),e.jsx("button",{type:"button",onClick:()=>A(!u),disabled:r,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",backgroundColor:"transparent",border:"none",cursor:r?"not-allowed":"pointer",color:"#6B7280",opacity:r?.6:1},children:u?e.jsx(S,{size:20}):e.jsx(E,{size:20})})]}),o.confirmPassword&&e.jsx("p",{style:{color:"#EF4444",fontSize:"0.75rem",marginTop:"0.25rem"},children:o.confirmPassword})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",fontSize:"0.875rem",color:"#6B7280",cursor:r?"default":"pointer",lineHeight:"1.5",opacity:r?.6:1},children:[e.jsx("input",{type:"checkbox",checked:h,onChange:s=>B(s.target.checked),disabled:r,style:{marginRight:"0.75rem",marginTop:"0.125rem"}}),e.jsxs("span",{children:["I agree to the"," ",e.jsx("button",{type:"button",onClick:D,disabled:r,style:{color:"#4A90E2",textDecoration:"underline",backgroundColor:"transparent",border:"none",padding:0,font:"inherit",cursor:r?"not-allowed":"pointer",opacity:r?.6:1},children:"Privacy Policy"})," ","and"," ",e.jsx("button",{type:"button",onClick:R,disabled:r,style:{color:"#4A90E2",textDecoration:"underline",backgroundColor:"transparent",border:"none",padding:0,font:"inherit",cursor:r?"not-allowed":"pointer",opacity:r?.6:1},children:"Terms of Service"})]})]}),o.terms&&e.jsx("p",{style:{color:"#EF4444",fontSize:"0.75rem",marginTop:"0.25rem"},children:o.terms})]}),e.jsx("button",{type:"submit",disabled:r,style:{width:"100%",backgroundColor:r?"#9CA3AF":"#4A90E2",color:"white",border:"none",borderRadius:"0.75rem",padding:"0.875rem",fontSize:"1rem",fontWeight:"600",cursor:r?"not-allowed":"pointer",fontFamily:"Poppins, sans-serif",transition:"all 0.2s ease",marginTop:"0.5rem"},children:r?"Creating Account...":"Create Account"})]}),e.jsx("div",{style:{textAlign:"center",marginTop:"2rem",padding:"1rem 0"},children:e.jsxs("p",{style:{color:"#6B7280",fontSize:"0.875rem"},children:["Already have an account?"," ",e.jsx("button",{onClick:()=>d("login"),disabled:r,style:{color:"#4A90E2",textDecoration:"underline",backgroundColor:"transparent",border:"none",fontSize:"0.875rem",cursor:r?"not-allowed":"pointer",fontFamily:"Poppins, sans-serif",opacity:r?.6:1},children:"Sign In"})]})})]})]})}export{H as SignupScreen};
